/*===============================================================
* 描述：调用Box.ConfirmDialog函数实现弹出确认信息框
* ======================================================================== */

Box.define('Demo.confirmdialog.index',{
    extend:'Box.Component',

    templates:{
        main:[
            '<div style="margin-left: 50px;margin-top: 50px;">'+
            '<div class="col-md-5">' +
            '<div style="margin-bottom: 15px"><lable>姓名：</lable>'+
            '<input class="k-textbox" style="margin-left: 15px;"/> </div>' +
            '<div style="margin-bottom: 15px"><lable>年龄：</lable>'+
            '<input class="k-textbox" style="margin-left: 15px;"/> </div>' +
            '<div style="margin-bottom: 15px"><lable>生日：</lable>'+
            '<input class="k-textbox" style="margin-left: 15px;"/></div> ' +
            '<div style="margin-bottom: 20px"><lable>电话：</lable>'+
            '<input class="k-textbox" style="margin-left: 15px;"/></div> ' +
            '<div>'+
            '<button class="confirm k-button k-primary" style="">确认</button>'+
            '<button class="cancel k-button k-primary" style="margin-left: 30px">取消</button>'+
            '</div>'+
            '</div>'+
            '<div class="col-md-7">' +
            '<button class="button k-button k-primary">查看源代码</button> ' +
            '<div class="text"></div>'+
            '</div>'+
            '</div>'
        ]
    },

    elements:{
        text:'.text',
        confirm:'.confirm',
        cancel:'.cancel',
        button:'.button'
    },

    events:{
        'click confirm':'confirmConfirm',
        'click cancel':'cancelConfirm',
        'click button':'checkFile'
    },

    setup:function () {},
    confirmConfirm:function () {
        Box.ConfirmDialog.show({
            message: '确定保存信息?',
            callback: function (result) {
                if (result) {
                    console.log('true');
                }
                else {
                    console.log('false');
                }
            }
        });
    },
    cancelConfirm:function () {
        Box.ConfirmDialog.show({
            message: '确定要退出?',
            callback: function (result) {
                if (result) {
                    console.log('true');
                }
                else {
                    console.log('false');
                }
            }
        });
    },
    checkFile:function () {
        var me = this;
        var myCodeMirror = CodeMirror(this.el.text[0], {
            // value: "function myScript(){return 100;}\n",
            mode: "javascript",
            theme: 'dracula'
        });
        Box.require('text!app/confirmdialog/index.js', function (text) {
            myCodeMirror.setValue(text)
        });
        this.el.button.attr('disabled','disabled');
    }

});




