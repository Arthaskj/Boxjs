Box.define('Demo.gridpage.index', {

    requires: [
        'Demo.gridpage.indexDetail'
    ],

    extend: 'Box.Component',

    templates: {
        main: [

            '<div>' +
                '<div class="grid"></div> '+
            '<div class="text" style="display:inline-block;width:750px;"></div>' +
            '<div><button class="k-button k-primary button">查看源代码</button></div>'+
            '</div>'
        ]
    },

    elements: {
        grid: '.grid',
        text: '.text',
        button: '.button'
    },
    events:{
        'click button': 'searchFile'
    },

    setup: function () {
        var me = this;
        var gridPage = new Demo.gridpage.indexDetail({
            renderTo: this.el.grid
        });


    },

    searchFile:function () {
        var myCodeMirror = CodeMirror(this.el.text[0], {
            // value: "function myScript(){return 100;}\n",
            mode: "javascript",
            theme: 'dracula'//设置主题，先找到主题对应的CSS文件引入进来，再设置一下名字，再改一下样式
        });
        Box.require('text!app/gridpage/indexDetail.js', function (text) {
            myCodeMirror.setValue(text)
        });
    }

});